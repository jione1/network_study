# OSI 7 계층

#### 프로토콜 (Protocol)

- 통신 규약
- 구성 요소
  - 구문 (Syntax): 데이터 형식, 신호 레벨, 부호화
  - 의미 (Semantics): 개체의 조정, 에러 제어 정보
  - 순서 (Timing): 순서 제어, 통신 속도 제어
- 데이터 전송 방식
  - 비트 단위: SDLC (Synchronous Data Link Control), HDLC (High Level Data Link Control)
  - 바이트 단위: DDCM (Digital Data Communication Message)
  - 문자 단위: BSC (Binary Synchronous Communication)



#### OSI 7 계층

- 물리 계층

  - 전기적, 기계적 연결 정의 
  - Bit단위, 전기적 신호, 전압 구성, 케이블, 인터페이스 등을 구성
  - 물리적 선로로 전송하기 위해서 전기적 신호인 비트로 데이터를 전송한다.
  - 장비
    - cable
    - Repeater
      - 네트워크 구산의 케이블의 전기적 신호를 재생하고 증폭하는 장치
      - 디지털 신호를 제공, 아날로그 신호 증폭 시 잡음과 왜곡까지 증폭
- 데이터 링크 (Data Link) 계층

  - 물리주소 결정, 에러제어, 흐름제어, 데이터 전송
  - Frame 단위, 전송 오류를 처리하는 최초의 계층
  - 네트워크 계층에서 붙인 IP 헤더에서 IP 주소를 읽어서 하드웨어 주소인 MAC 주소를 구한다.
  - 에러를 탐지하고 교정한다.
  - 네트워크에 부하가 발생하지 않도록 흐름 제어(Flow Control)를 한다.
  - 프로토콜
    - 흐름제어, 오류제어 (ARQ)
    - HDLC
    - Frame Relay
    
  - 장비
    - Bridge
      - 서로 다른 LAN Segment를 연결, 관리자에게 MAC주소 기반 필터링 제공하여 더 나은 대역폭 사용과 트래픽을 통제
      - 리피터와 같이 데이터 신호를 증폭하지만 MAC 기반에서 동작
    - Switch
        - 목적지의 MAC 주소를 알고 있는 지정된 포트로 데이터를 전송
        - Repeater와 Bridge 기능을 결합
        - 네트워크의 속도 및 효율적 운영, Data Link 계층에서도 작동
- 네트워크 (Network) 계층
    - 경로 선택, 라우팅 수행, 논리적 주소 연결(IP)
    - 데이터 흐름 조절, 주소 지정 메커니즘 구현
    - 네트워크에서 노드에 전송되는 패킷 흐름을 통제하고, 상태 메시지가 네트워ㅡ 상에서 어떻게 노드로 전송되는가를 정의 
    - Datagram 단위
    - 수신자의 IP 주소를 읽어서 라우터가 경로를 결정한다.
    - 경로 결정은 최단 경로 알고리즘과 같은 라우팅 알고리즘을 사용해서 결정하고 경로가 결정되면 포워딩 (Forwarding)을 수행한다.
    - IPv4 주소와 IPv6 주소가 있다.
    - 네트워크의 에러 확인을 위해서 ICMP프로토콜을 사용한다.
    - 프로토콜
        - IP, ICMP
        - 라우팅 프로토콜 (RIP, OSPF)
    - 장비
        - Router
            - 패킷을 받아 경로를 설정하고 패킷을 전달
            - Bridge는 MAC주소를 참조하지만 Router는 네트워크 주소까지 참조하여 경로를 설정
            - 패킷 헤더 정보에서 IP 주소를 확인하여 목적지 네트워크로만 전달하며 Broadcasting을 차단
- 전송 (Transport) 계층
    - 가상 연결, 에러제어, Data 흐름 제어, Segment 단위
    - 두 개의 종단 간 End-to-End 데이터 흐름이 가능하도록 논리적 연결
    - 신뢰도, 품질 보증, 오류 탐지 및 교정 기능 제공
    - 다중화 (Multiplexing) 발생
    - 송신자와 수신자 간에 논리적 연결 (Logical Connection)을 수생한다.
    - 프로토콜
        - TCP, UDP
- 세션 (Session) 계층
    - 세션 연결 및 동기화 수행, 통신 방식 결정
    - 가상 연결을 제공하여 Login/Logout수행
    - 송신자와 수신자 간에 통신을 위해서 동기화 신호를 주고 받는다.
    - 세션연결을 하고 가상 연결을 제공한다
    - 통신 방식인 단순, 반이중, 전이중 방식을 결정한다
- 표현 (Presentation) 계층
    - 포맷 기능, 압축, 암호화
    - 텍스트 및 그래픽 정보를 컴퓨터가 이해할 수 있는 16진수 데이터로 변환
    - 애플리케이션에서 전송한 메시지에 대해서 코드화를 수행한다.
    - 사전에 정해진 코드로 변환한다.
    - 네트워크 송신 과정에서 스니핑을 통해서 메시지를 홈쳐볼 수가 있기 때문에 암호화를 수행한다.
- 애플리케이션 (Application) 계층
    - 사용자 소프트웨어를 네트워크에 접근 가능하도록 함
    - 사용자에게 최종 서비스를 제공
    - 사용자들이 사용하는 프로그램이 있는 계층이다.
    - 데이터 손신을 위해서 메시지를 만든다.
    - 최상위 계층으로 하위 계층의 구조를 몰라도 네트워크를 사용할 수 있다.
    - 프로토콜
        - FTP, SNMP, HTTP, Mail, Telnet 등
    - 장비
        - Gateway
            - 서로 다른 네트워크 망과의 연결
            - 패킷 헤더의 주소 및 포트 외의 거의 모든 정보를 참조



#### 에러 제어 (Error Control)

- FEC (Forward Error Contrl)
  - 수신 받은 데이터에 에러가 없는지 확인 => 수신 측이 에러 처리
  - 데이터 전송 과정에서 발생한 오류를 검출하여, 오류를 재전송 요구 없이 수정
  - 재전송 요구가 없어 역 채널이 필요 없고, 연속적인 데이터 전송이 가능
  - 오류 검출 및 수정을 위한 잉여 비트들이 추가 전송되므로 전송 효율 감소
  - 해밍코드 (Hamming Code)
    - 해밍코드는 오류 발견 및 교정이 가능한 코드
    - 1비트의 에러 검출 및 교정
  - CRC 코드
    - 데이터 통신에서 전송 중에 오류 발생을 확인하기 위해서 덧붙이는 코드
  - 패리티 비트 (Parity Bit)
    - 하나의 비트로 코드의 에러를 검출하는 것
    - 데이터 내의 Set 비트 수를 체크하여  짝수와 홀수에 따라 코드를 그대로 두거나 1비트를 추가하여 에러를 검출
- BEC (Backward Error Control)
  - 수신 측이 에러 검출 후 송신 측에게 에러가 발생한 데이터 블록을 다시 전송 요청하는 방식
  - 송신 측이 에러 처리 => ARQ (Auto Repeat reQuest)
  - Stop-and-Wait
    - 에러 발생 즉시 재전송
    - 순차적으로 수신
    - 가장 단순한 구현
    - 신뢰성 있는 전송
    - 대기 시간 존재로 전송 효율 저하
  - Go-Back-N
    - 마지막으로 수신 받은 데이터 이후의 모든 데이터를 재전송 하는 방법
    - TCP에서 사용
    - 프레임의 송신 순서와 수신 순서가 동일해야 수신
    - 간단한 구현
    - 적은 수신 측 버퍼 사용량
  - Selective Repeat
    - 중간에 빠져 있는 것만 재전송
    - 순서와 상관없이 윈도우 크기만큼의 범위 내에서 자유롭게 수신
    - 구현이 복잡
    - 버퍼 사용량이 큼
    - 보다 적은 재전송 대역폭